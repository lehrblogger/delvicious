function removeChildren(b){while(b.hasChildNodes()){b.removeChild(b.lastChild)}}function quickElement(){var c=document.createElement(arguments[0]);if(arguments[2]!=""&&arguments[2]!=null){var d=document.createTextNode(arguments[2]);c.appendChild(d)}var a=arguments.length;for(var b=3;b<a;b+=2){c.setAttribute(arguments[b],arguments[b+1])}arguments[1].appendChild(c);return c}var CalendarNamespace={monthsOfYear:gettext("January February March April May June July August September October November December").split(" "),daysOfWeek:gettext("S M T W T F S").split(" "),isLeapYear:function(a){return(((a%4)==0)&&((a%100)!=0)||((a%400)==0))},getDaysInMonth:function(b,a){var c;if(b==1||b==3||b==5||b==7||b==8||b==10||b==12){c=31}else{if(b==4||b==6||b==9||b==11){c=30}else{if(b==2&&CalendarNamespace.isLeapYear(a)){c=29}else{c=28}}}return c},draw:function(j,k,e,n){j=parseInt(j);k=parseInt(k);var o=document.getElementById(e);removeChildren(o);var h=document.createElement("table");quickElement("caption",h,CalendarNamespace.monthsOfYear[j-1]+" "+k);var b=quickElement("tbody",h);var a=quickElement("tr",b);for(var c=0;c<7;c++){quickElement("th",a,CalendarNamespace.daysOfWeek[c])}var d=new Date(k,j-1,1).getDay();var m=CalendarNamespace.getDaysInMonth(j,k);a=quickElement("tr",b);for(var c=0;c<d;c++){var g=quickElement("td",a," ");g.style.backgroundColor="#f3f3f3"}var f=1;for(var c=d;f<=m;c++){if(c%7==0&&f!=1){a=quickElement("tr",b)}var l=quickElement("td",a,"");quickElement("a",l,f,"href","javascript:void("+n+"("+k+","+j+","+f+"));");f++}while(a.childNodes.length<7){var g=quickElement("td",a," ");g.style.backgroundColor="#f3f3f3"}o.appendChild(h)}};function Calendar(a,b){this.div_id=a;this.callback=b;this.today=new Date();this.currentMonth=this.today.getMonth()+1;this.currentYear=this.today.getFullYear()}Calendar.prototype={drawCurrent:function(){CalendarNamespace.draw(this.currentMonth,this.currentYear,this.div_id,this.callback)},drawDate:function(b,a){this.currentMonth=b;this.currentYear=a;this.drawCurrent()},drawPreviousMonth:function(){if(this.currentMonth==1){this.currentMonth=12;this.currentYear--}else{this.currentMonth--}this.drawCurrent()},drawNextMonth:function(){if(this.currentMonth==12){this.currentMonth=1;this.currentYear++}else{this.currentMonth++}this.drawCurrent()},drawPreviousYear:function(){this.currentYear--;this.drawCurrent()},drawNextYear:function(){this.currentYear++;this.drawCurrent()}};